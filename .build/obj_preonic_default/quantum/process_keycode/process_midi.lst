   1               		.file	"process_midi.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.process_midi,"ax",@progbits
  11               	.global	process_midi
  13               	process_midi:
  14               	.LFB112:
  15               		.file 1 "../../quantum/process_keycode/process_midi.c"
   1:../../quantum/process_keycode/process_midi.c **** #include "process_midi.h"
   2:../../quantum/process_keycode/process_midi.c **** 
   3:../../quantum/process_keycode/process_midi.c **** bool midi_activated = false;
   4:../../quantum/process_keycode/process_midi.c **** uint8_t midi_starting_note = 0x0C;
   5:../../quantum/process_keycode/process_midi.c **** int midi_offset = 7;
   6:../../quantum/process_keycode/process_midi.c **** 
   7:../../quantum/process_keycode/process_midi.c **** bool process_midi(uint16_t keycode, keyrecord_t *record) {
  16               		.loc 1 7 0
  17               		.cfi_startproc
  18               	.LVL0:
  19 0000 CF93      		push r28
  20               	.LCFI0:
  21               		.cfi_def_cfa_offset 3
  22               		.cfi_offset 28, -2
  23 0002 DF93      		push r29
  24               	.LCFI1:
  25               		.cfi_def_cfa_offset 4
  26               		.cfi_offset 29, -3
  27               	/* prologue: function */
  28               	/* frame size = 0 */
  29               	/* stack size = 2 */
  30               	.L__stack_usage = 2
  31 0004 EC01      		movw r28,r24
  32 0006 FB01      		movw r30,r22
   8:../../quantum/process_keycode/process_midi.c ****     if (keycode == MI_ON && record->event.pressed) {
  33               		.loc 1 8 0
  34 0008 CD31      		cpi r28,29
  35 000a 80E7      		ldi r24,112
  36 000c D807      		cpc r29,r24
  37               	.LVL1:
  38 000e 01F4      		brne .L2
  39               		.loc 1 8 0 is_stmt 0 discriminator 1
  40 0010 8281      		ldd r24,Z+2
  41 0012 8823      		tst r24
  42 0014 01F0      		breq .L3
  43               	.LBB2:
   9:../../quantum/process_keycode/process_midi.c ****       midi_activated = true;
  44               		.loc 1 9 0 is_stmt 1
  45 0016 81E0      		ldi r24,lo8(1)
  46 0018 8093 0000 		sts midi_activated,r24
  10:../../quantum/process_keycode/process_midi.c ****       music_scale_user();
  47               		.loc 1 10 0
  48 001c 0E94 0000 		call music_scale_user
  49               	.LVL2:
  50 0020 00C0      		rjmp .L31
  51               	.LVL3:
  52               	.L2:
  53               	.LBE2:
  11:../../quantum/process_keycode/process_midi.c ****       return false;
  12:../../quantum/process_keycode/process_midi.c ****     }
  13:../../quantum/process_keycode/process_midi.c **** 
  14:../../quantum/process_keycode/process_midi.c ****     if (keycode == MI_OFF && record->event.pressed) {
  54               		.loc 1 14 0
  55 0022 CE31      		cpi r28,30
  56 0024 80E7      		ldi r24,112
  57 0026 D807      		cpc r29,r24
  58 0028 01F4      		brne .L3
  59               		.loc 1 14 0 is_stmt 0 discriminator 1
  60 002a 8281      		ldd r24,Z+2
  61 002c 8823      		tst r24
  62 002e 01F0      		breq .L3
  15:../../quantum/process_keycode/process_midi.c ****       midi_activated = false;
  63               		.loc 1 15 0 is_stmt 1
  64 0030 1092 0000 		sts midi_activated,__zero_reg__
  65               	.L32:
  16:../../quantum/process_keycode/process_midi.c ****       midi_send_cc(&midi_device, 0, 0x7B, 0);
  66               		.loc 1 16 0
  67 0034 20E0      		ldi r18,0
  68 0036 4BE7      		ldi r20,lo8(123)
  69 0038 60E0      		ldi r22,0
  70               	.LVL4:
  71 003a 80E0      		ldi r24,lo8(midi_device)
  72 003c 90E0      		ldi r25,hi8(midi_device)
  73 003e 0E94 0000 		call midi_send_cc
  74               	.LVL5:
  75               	.L31:
  17:../../quantum/process_keycode/process_midi.c ****       return false;
  76               		.loc 1 17 0
  77 0042 80E0      		ldi r24,0
  78 0044 00C0      		rjmp .L4
  79               	.LVL6:
  80               	.L3:
  18:../../quantum/process_keycode/process_midi.c ****     }
  19:../../quantum/process_keycode/process_midi.c **** 
  20:../../quantum/process_keycode/process_midi.c ****     if (midi_activated) {
  81               		.loc 1 20 0
  82 0046 8091 0000 		lds r24,midi_activated
  83 004a 8823      		tst r24
  84 004c 01F4      		brne .+2
  85 004e 00C0      		rjmp .L12
  86               	.LBB3:
  21:../../quantum/process_keycode/process_midi.c ****       if (record->event.key.col == (MATRIX_COLS - 1) && record->event.key.row == (MATRIX_ROWS - 1))
  87               		.loc 1 21 0
  88 0050 4081      		ld r20,Z
  89 0052 8281      		ldd r24,Z+2
  90 0054 9181      		ldd r25,Z+1
  91 0056 4B30      		cpi r20,lo8(11)
  92 0058 01F4      		brne .L5
  93               		.loc 1 21 0 is_stmt 0 discriminator 1
  94 005a 9430      		cpi r25,lo8(4)
  95 005c 01F4      		brne .L6
  22:../../quantum/process_keycode/process_midi.c ****           if (record->event.pressed) {
  96               		.loc 1 22 0 is_stmt 1
  97 005e 8823      		tst r24
  98 0060 01F4      		brne .+2
  99 0062 00C0      		rjmp .L4
  23:../../quantum/process_keycode/process_midi.c ****               midi_starting_note++; // Change key
 100               		.loc 1 23 0
 101 0064 8091 0000 		lds r24,midi_starting_note
 102 0068 8F5F      		subi r24,lo8(-(1))
 103 006a 00C0      		rjmp .L33
 104               	.L5:
  24:../../quantum/process_keycode/process_midi.c ****               midi_send_cc(&midi_device, 0, 0x7B, 0);
  25:../../quantum/process_keycode/process_midi.c ****           }
  26:../../quantum/process_keycode/process_midi.c ****           return false;
  27:../../quantum/process_keycode/process_midi.c ****       }
  28:../../quantum/process_keycode/process_midi.c ****       if (record->event.key.col == (MATRIX_COLS - 2) && record->event.key.row == (MATRIX_ROWS - 1))
 105               		.loc 1 28 0
 106 006c 4A30      		cpi r20,lo8(10)
 107 006e 01F4      		brne .L7
 108               		.loc 1 28 0 is_stmt 0 discriminator 1
 109 0070 9430      		cpi r25,lo8(4)
 110 0072 01F4      		brne .L6
  29:../../quantum/process_keycode/process_midi.c ****           if (record->event.pressed) {
 111               		.loc 1 29 0 is_stmt 1
 112 0074 8823      		tst r24
 113 0076 01F4      		brne .+2
 114 0078 00C0      		rjmp .L4
  30:../../quantum/process_keycode/process_midi.c ****               midi_starting_note--; // Change key
 115               		.loc 1 30 0
 116 007a 8091 0000 		lds r24,midi_starting_note
 117 007e 8150      		subi r24,lo8(-(-1))
 118               	.L33:
 119 0080 8093 0000 		sts midi_starting_note,r24
 120 0084 00C0      		rjmp .L32
 121               	.L7:
  31:../../quantum/process_keycode/process_midi.c ****               midi_send_cc(&midi_device, 0, 0x7B, 0);
  32:../../quantum/process_keycode/process_midi.c ****           }
  33:../../quantum/process_keycode/process_midi.c ****           return false;
  34:../../quantum/process_keycode/process_midi.c ****       }
  35:../../quantum/process_keycode/process_midi.c ****       if (record->event.key.col == (MATRIX_COLS - 3) && record->event.key.row == (MATRIX_ROWS - 1) 
 122               		.loc 1 35 0
 123 0086 4930      		cpi r20,lo8(9)
 124 0088 01F4      		brne .L8
 125               		.loc 1 35 0 is_stmt 0 discriminator 1
 126 008a 9430      		cpi r25,lo8(4)
 127 008c 01F4      		brne .L6
 128               		.loc 1 35 0 discriminator 2
 129 008e 8823      		tst r24
 130 0090 01F0      		breq .L6
  36:../../quantum/process_keycode/process_midi.c ****           midi_offset++; // Change scale
 131               		.loc 1 36 0 is_stmt 1
 132 0092 8091 0000 		lds r24,midi_offset
 133 0096 9091 0000 		lds r25,midi_offset+1
 134 009a 0196      		adiw r24,1
 135 009c 00C0      		rjmp .L34
 136               	.L8:
  37:../../quantum/process_keycode/process_midi.c ****           midi_send_cc(&midi_device, 0, 0x7B, 0);
  38:../../quantum/process_keycode/process_midi.c ****           return false;
  39:../../quantum/process_keycode/process_midi.c ****       }
  40:../../quantum/process_keycode/process_midi.c ****       if (record->event.key.col == (MATRIX_COLS - 4) && record->event.key.row == (MATRIX_ROWS - 1) 
 137               		.loc 1 40 0
 138 009e 4830      		cpi r20,lo8(8)
 139 00a0 01F4      		brne .L6
 140               		.loc 1 40 0 is_stmt 0 discriminator 1
 141 00a2 9430      		cpi r25,lo8(4)
 142 00a4 01F4      		brne .L6
 143               		.loc 1 40 0 discriminator 2
 144 00a6 8823      		tst r24
 145 00a8 01F0      		breq .L6
  41:../../quantum/process_keycode/process_midi.c ****           midi_offset--; // Change scale
 146               		.loc 1 41 0 is_stmt 1
 147 00aa 8091 0000 		lds r24,midi_offset
 148 00ae 9091 0000 		lds r25,midi_offset+1
 149 00b2 0197      		sbiw r24,1
 150               	.L34:
 151 00b4 9093 0000 		sts midi_offset+1,r25
 152 00b8 8093 0000 		sts midi_offset,r24
 153 00bc 00C0      		rjmp .L32
 154               	.L6:
  42:../../quantum/process_keycode/process_midi.c ****           midi_send_cc(&midi_device, 0, 0x7B, 0);
  43:../../quantum/process_keycode/process_midi.c ****           return false;
  44:../../quantum/process_keycode/process_midi.c ****       }
  45:../../quantum/process_keycode/process_midi.c ****       // basic
  46:../../quantum/process_keycode/process_midi.c ****       // uint8_t note = (midi_starting_note + SCALE[record->event.key.col + midi_offset])+12*(MATRI
  47:../../quantum/process_keycode/process_midi.c ****       // advanced
  48:../../quantum/process_keycode/process_midi.c ****       // uint8_t note = (midi_starting_note + record->event.key.col + midi_offset)+12*(MATRIX_ROWS 
  49:../../quantum/process_keycode/process_midi.c ****       // guitar
  50:../../quantum/process_keycode/process_midi.c ****       uint8_t note = (midi_starting_note + record->event.key.col + midi_offset)+5*(MATRIX_ROWS - re
 155               		.loc 1 50 0
 156 00be 2091 0000 		lds r18,midi_starting_note
 157 00c2 420F      		add r20,r18
 158 00c4 3091 0000 		lds r19,midi_offset
 159 00c8 430F      		add r20,r19
 160 00ca 25E0      		ldi r18,lo8(5)
 161 00cc 30E0      		ldi r19,0
 162 00ce 291B      		sub r18,r25
 163 00d0 3109      		sbc r19,__zero_reg__
 164 00d2 922F      		mov r25,r18
 165 00d4 990F      		lsl r25
 166 00d6 990F      		lsl r25
 167 00d8 290F      		add r18,r25
 168 00da 420F      		add r20,r18
 169               	.LVL7:
  51:../../quantum/process_keycode/process_midi.c ****       // violin
  52:../../quantum/process_keycode/process_midi.c ****       // uint8_t note = (midi_starting_note + record->event.key.col + midi_offset)+7*(MATRIX_ROWS -
  53:../../quantum/process_keycode/process_midi.c **** 
  54:../../quantum/process_keycode/process_midi.c ****       if (record->event.pressed) {
  55:../../quantum/process_keycode/process_midi.c ****         // midi_send_noteon(&midi_device, record->event.key.row, midi_starting_note + SCALE[record-
  56:../../quantum/process_keycode/process_midi.c ****         midi_send_noteon(&midi_device, 0, note, 127);
 170               		.loc 1 56 0
 171 00dc 2FE7      		ldi r18,lo8(127)
 172 00de 60E0      		ldi r22,0
 173               	.LVL8:
  54:../../quantum/process_keycode/process_midi.c ****         // midi_send_noteon(&midi_device, record->event.key.row, midi_starting_note + SCALE[record-
 174               		.loc 1 54 0
 175 00e0 8823      		tst r24
 176 00e2 01F0      		breq .L9
 177               		.loc 1 56 0
 178 00e4 80E0      		ldi r24,lo8(midi_device)
 179 00e6 90E0      		ldi r25,hi8(midi_device)
 180 00e8 0E94 0000 		call midi_send_noteon
 181               	.LVL9:
 182 00ec 00C0      		rjmp .L10
 183               	.LVL10:
 184               	.L9:
  57:../../quantum/process_keycode/process_midi.c ****       } else {
  58:../../quantum/process_keycode/process_midi.c ****         // midi_send_noteoff(&midi_device, record->event.key.row, midi_starting_note + SCALE[record
  59:../../quantum/process_keycode/process_midi.c ****         midi_send_noteoff(&midi_device, 0, note, 127);
 185               		.loc 1 59 0
 186 00ee 80E0      		ldi r24,lo8(midi_device)
 187 00f0 90E0      		ldi r25,hi8(midi_device)
 188 00f2 0E94 0000 		call midi_send_noteoff
 189               	.LVL11:
 190               	.L10:
  60:../../quantum/process_keycode/process_midi.c ****       }
  61:../../quantum/process_keycode/process_midi.c **** 
  62:../../quantum/process_keycode/process_midi.c ****       if (keycode < 0xFF) // ignores all normal keycodes, but lets RAISE, LOWER, etc through
 191               		.loc 1 62 0
 192 00f6 81E0      		ldi r24,lo8(1)
 193 00f8 CF3F      		cpi r28,-1
 194 00fa D105      		cpc r29,__zero_reg__
 195 00fc 00F4      		brsh .L4
 196 00fe 00C0      		rjmp .L31
 197               	.LVL12:
 198               	.L12:
 199               	.LBE3:
  63:../../quantum/process_keycode/process_midi.c ****         return false;
  64:../../quantum/process_keycode/process_midi.c ****     }
  65:../../quantum/process_keycode/process_midi.c ****   return true;
 200               		.loc 1 65 0
 201 0100 81E0      		ldi r24,lo8(1)
 202               	.LVL13:
 203               	.L4:
 204               	/* epilogue start */
  66:../../quantum/process_keycode/process_midi.c **** }...
 205               		.loc 1 66 0
 206 0102 DF91      		pop r29
 207 0104 CF91      		pop r28
 208               	.LVL14:
 209 0106 0895      		ret
 210               		.cfi_endproc
 211               	.LFE112:
 213               	.global	midi_offset
 214               		.section	.data.midi_offset,"aw",@progbits
 217               	midi_offset:
 218 0000 0700      		.word	7
 219               	.global	midi_starting_note
 220               		.section	.data.midi_starting_note,"aw",@progbits
 223               	midi_starting_note:
 224 0000 0C        		.byte	12
 225               	.global	midi_activated
 226               		.section	.bss.midi_activated,"aw",@nobits
 229               	midi_activated:
 230 0000 00        		.zero	1
 231               		.comm	midi_device,237,1
 232               		.text
 233               	.Letext0:
 234               		.file 2 "/usr/local/Cellar/avr-gcc/4.9.3/avr/include/stdint.h"
 235               		.file 3 "../../tmk_core/common/keyboard.h"
 236               		.file 4 "../../tmk_core/common/action.h"
 237               		.file 5 "../../tmk_core/protocol/midi/midi_function_types.h"
 238               		.file 6 "../../tmk_core/protocol/midi/midi_device.h"
 239               		.file 7 "../../tmk_core/protocol/midi/bytequeue/bytequeue.h"
 240               		.file 8 "../../tmk_core/protocol/lufa/LUFA-git/LUFA/Drivers/USB/Core/USBTask.h"
 241               		.file 9 "../../tmk_core/protocol/lufa/lufa.h"
 242               		.file 10 "../../tmk_core/protocol/midi/midi.h"
 243               		.file 11 "../../quantum/keymap.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 process_midi.c
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:2      *ABS*:000000000000003e __SP_H__
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:3      *ABS*:000000000000003d __SP_L__
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:4      *ABS*:000000000000003f __SREG__
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:5      *ABS*:0000000000000000 __tmp_reg__
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:6      *ABS*:0000000000000001 __zero_reg__
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:13     .text.process_midi:0000000000000000 process_midi
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:229    .bss.midi_activated:0000000000000000 midi_activated
                            *COM*:00000000000000ed midi_device
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:223    .data.midi_starting_note:0000000000000000 midi_starting_note
/var/folders/dz/_5509m0x1cvcwp6fj8ygb2300000gn/T//ccmjBUiw.s:217    .data.midi_offset:0000000000000000 midi_offset

UNDEFINED SYMBOLS
music_scale_user
midi_send_cc
midi_send_noteon
midi_send_noteoff
__do_copy_data
__do_clear_bss
